{# FIXME: figure out better way to get widget data #}
{% set hasProject = data.widget._pieces.length > 0 %}

{%- if hasProject -%}
<article class="featured-piece-widget featured-event-widget">
  {%- if data.widget.isSponsored -%}
    <p class="feature-type">Sponsored Event</p>
  {%- else -%}
    <p class="feature-type">Featured Event</p>
  {%- endif -%}

  {%- set piece = data.widget._pieces[0] -%}
  <h1>{{ piece.title }}</h1>

  <p class="byline">{{ piece.city }}, {{ piece.country }}</p>

  {# image start #}
  {%- set aposImageData = apos.images.first(piece.heroImage) -%}
  {%- set image = apos.aem.getImageBasicData(aposImageData) -%}
  <img
    class="hero-image"
    src="{{ image.url }}"
    alt="{{ image.alt }}"
  />
  {# image end #}

  <div class="text-container">
    {%- if piece.description.items -%}
      {%- set descriptionText = piece.description.items[0].content | safe -%}
    {%- else -%}
      {%- set descriptionText = piece.description -%}
    {%- endif -%}
    <p>{{ descriptionText | truncate(140, true, "...") }}</p>

    <a class="cta" href="{{ piece._url }}">View Details</a>
  </div>
</article>
{%- endif -%}
