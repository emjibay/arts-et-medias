{% extends "layouts/pieceDetailsLayout.njk" %}

{% from 'macros/piece-details.njk' import relatedContent, tags, websiteCTA %}
{% from 'macros/piece-link-list.njk' import pieceLinkList %}


{%- set piece = data.piece -%}

{% block title %}
  {{ piece.title }} - Books | Arts et MÃ©dias
{% endblock %}

{% block main %}
  <div class="piece-details book-details">
    <div class="content">
      <main id="main">
        <article>
          {% include "partials/components/breadcrumbs.njk" %}

          <h1 class="h1">{{ piece.title }}</h1>

          <div class="subheading">
            <h2 class="sr-only">Authors</h2>
            {{ pieceLinkList(piece._author) }}
          </div>

          <div class="page-content">
            {% block pageContent %}
              {# image start #}
              {%- set aposImageData = apos.images.first(piece.heroImage) -%}
              {%- if aposImageData -%}
                {%- set image = apos.aem.getImageBasicData(aposImageData) -%}
                <img
                  class="book-cover"
                  src="{{ image.url }}"
                  alt="{{ image.alt }}"
                />
              {%- endif -%}
              {# image end #}

              <h2 class="sr-only">Description</h2>
              <div class="description">
                {{ apos.singleton(piece, 'description', 'apostrophe-rich-text') }}
              </div>

              {{ websiteCTA(piece) }}

              <hr class="separator"/>

              <h2>Year</h2>
              <p>{{ piece.yearPublished }}</p>

              <h2>Language</h2>
              {%- set lang = apos.aemLocalization.getLanguage(piece.lang) -%}
              <p>{{ lang }}</p>

              {%- if piece.isTranslation -%}
                <h2>Original Language</h2>
                {%- set originalLang = apos.aemLocalization.getLanguage(piece.originalLang) -%}
                <p>{{ originalLang }}</p>

                <h2>Translator</h2>
                {{ pieceLinkList(piece._translator) }}
              {%- endif -%}

              {{ relatedContent(piece, false) }}

              {{ tags(piece) }}
            {% endblock %}
          </div>

          {% block sidebar %}
            {% include "partials/books/sidebar-details-en.njk" %}
          {% endblock %}
        </article>
      </main>
    </div>
  </div>
{% endblock %}
