{% extends "layouts/pieceDetailsLayout.njk" %}

{%- from 'macros/metadata.njk' import descriptiveMetaData -%}
{%- from 'macros/piece-details.njk' import relatedOrganizations, relatedPieces, relatedTaggedPieces, tags, websiteCTA -%}
{%- from 'macros/piece-link-list.njk' import sortedPieceLinkList -%}
{%- from 'options/options.njk' import fixedRichTextOptions -%}


{%- set piece = data.piece -%}
{%- set hasProfilePic = piece.profilePic.items|length > 0 -%}

{% block title %}
  {{ piece.title }} - People | Arts et MÃ©dias
{% endblock %}

{% block metadata %}
  {{
    descriptiveMetaData({
      title: piece.title,
      description: piece.shortDescription,
      heroImage: piece.profilePic,
      url: piece._url,
      baseUrl: data.baseUrl
    })
  }}
{% endblock %}

{% block mainAdditionalClasses %}person-details{% endblock %}

{% block pageContent %}
  <h2 class="sr-only">Description</h2>

  {%- if hasProfilePic -%}
    <div class="profile-pic-container">
      {% include "partials/people/profile-pic-en.njk" %}
    </div>
  {%- endif -%}

  <div class="description rich-description">
    {{
      apos.singleton(
        piece,
        'description',
        'apostrophe-rich-text',
        fixedRichTextOptions
      )
    }}
  </div>

  {{ websiteCTA(piece) }}

  <hr class="separator"/>

  {# projects #}
  {# {{
    relatedPieces(
      'Creator of the Following Projects',
      piece._projects
    )
  }} #}

  {# articles #}
  {{
    relatedPieces(
      'Author of the Following Articles',
      piece._articles
    )
  }}
  {{
    relatedPieces(
      'Translated the Following Articles',
      piece._articlesTranslated
    )
  }}
  {{
    relatedPieces(
      'Related Articles',
      piece._articlesMentioned
    )
  }}

  {# books #}
  {{
    relatedPieces(
      'Author of the Following Books',
      piece._books
    )
  }}
  {{
    relatedPieces(
      'Contributed to the Following Books',
      piece._booksContributed
    )
  }}
  {{
    relatedPieces(
      'Translated the Following Books',
      piece._booksTranslated
    )
  }}
  {{
    relatedPieces(
      'Related Books',
      piece._booksMentioned
    )
  }}

  {# medias #}
  {{
    relatedPieces(
      'Related Medias',
      piece._medias
    )
  }}

  {# organizations #}
  {{ relatedOrganizations(piece._organizations) }}

  {# festivals #}
  {{
    relatedTaggedPieces(
      'Related Festivals',
      piece._events,
      ['festival']
    )
  }}

  {# conferences #}
  {{
    relatedTaggedPieces(
      'Related Conferences',
      piece._events,
      ['conference']
    )
  }}

  {# workshops #}
  {{
    relatedTaggedPieces(
      'Related Workshops',
      piece._events,
      ['workshop']
    )
  }}

  {# academic programs #}
  {{
    relatedPieces(
      'Related to the Following Academic Program',
      piece._educations
    )
  }}

  {{ tags(piece) }}
{% endblock %}

{% block sidebar %}
  {% include "partials/people/sidebar-details-en.njk" %}
{% endblock %}
