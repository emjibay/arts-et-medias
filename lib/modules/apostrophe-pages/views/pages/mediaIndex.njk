{% extends "layouts/indexLayout.njk" %}


{%- from 'macros/banner-ad.njk' import inContextLeaderboard -%}
{%- from 'macros/cta.njk' import seeAllCTA -%}
{%- from 'macros/piece-index.njk' import recentlyAdded -%}


{%- set leaderboardOptions = { data: data, propName: 'mediaLeaderboard' } -%}
{%- set areLeaderboardsVisible = apos.aemBannerAds.areVisible(leaderboardOptions) -%}


{% macro recentlyAddedMedia(type, category) %}
  {%- set cat = 'media|categories|' + category + '|' -%}
  {{
    recentlyAdded(
      __(cat + 'recentlyAdded'),
      data.mediaByMostRecent,
      __(cat + 'tags'),
      4
    )
  }}
  {{
    seeAllCTA(
      __(cat + 'seeAllCTA'),
      __(cat + 'url')
    )
  }}
{% endmacro %}


{% block title %}
  {{ apos.aemSeo.buildSimplePageTitle(__, data.page.title) }}
{% endblock %}

{% block mainAdditionalClasses %}page-media-index{% endblock %}

{% block pageTitle %}{{ data.page.title }}{% endblock %}

{% block advertisementBeforeMain %}
  {%- if areLeaderboardsVisible -%}
    {{ inContextLeaderboard(leaderboardOptions, { location: 'before' }) }}
  {%- endif -%}
{% endblock %}

{% block pageContent %}
  {#- media types -#}
  {{ recentlyAddedMedia('magazine', 'magazines') }}

  {{ recentlyAddedMedia('blog', 'blogs') }}

  {{ recentlyAddedMedia('website', 'websites') }}

  {{ recentlyAddedMedia('newsletter', 'newsletters') }}
  {#- media types end -#}
{% endblock %}

{% block sidebar %}
  {% include "partials/media/sidebar.njk" %}
{% endblock %}
