{% extends "layouts/indexLayout.njk" %}

{%- from 'macros/piece-index.njk' import pieceList -%}


{% macro recentlyAdded(label, tags) %}
  <h2 class="content-type-heading">{{ label }}</h2>
  {%-
    set filtered = apos.aem.getPiecesWithTags(
      data.mediaByMostRecent,
      tags
    )
  -%}
  {%-
    set recentlyAdded = [
      filtered[0],
      filtered[1]
    ]
  -%}
  {{ pieceList(recentlyAdded) }}
{% endmacro %}


{% block title %}
  {{ data.page.title }} | Arts et MÃ©dias
{% endblock %}

{% block mainAdditionalClasses %}media-index{% endblock %}

{% block pageContent %}
  {{
    recentlyAdded(
      'Recently Added Blogs',
      ['blog']
    )
  }}

  {{
    recentlyAdded(
      'Recently Added Websites',
      ['website']
    )
  }}

  {{
    recentlyAdded(
      'Recently Added Magazines',
      ['magazine']
    )
  }}

  <h2 class="content-type-heading">Recently Added Books</h2>
  {%-
    set recentlyAddedBooks = [
      data.booksByMostRecent[0],
      data.booksByMostRecent[1]
    ]
  -%}
  {{ pieceList(recentlyAddedBooks) }}
{% endblock %}

{% block sidebar %}
  {% include "partials/media/sidebar-en.njk" %}
{% endblock %}
