{"version":3,"sources":["src/js/components/lang-switch.js","src/js/components/mega-menu.js","src/js/components/mobile-menu.js","src/js/constants/breakpoint.js","src/js/constants/column-width.js","src/js/constants/content-width.js","src/js/constants/gutter-width.js","src/js/initialize.js","src/js/models/breakpoints-model.js","src/js/utils/is-draft-mode.js"],"names":["currentLocale","forms","selects","init","getDOMElements","getCurrentLocale","updateSelect","addEventListeners","length","console","warn","i","form","addEventListener","event","preventDefault","langSwitch","value","toLowerCase","window","location","document","body","dataset","locale","replace","getElementsByClassName","isCurrentLocale","option","toUpperCase","select","index","options","selectedIndex","breakpointModel","require","idsDict","headerArticlesNavItem","headerEventsNavItem","headerMediaNavItem","headerPeopleNavItem","headerOrgsNavItem","headerEducationNavItem","headerSearchNavItem","headerAboutNavItem","navItems","hideButtons","menuPanel","duration","timer","isVisible","addBodyClickListener","addWindowResizeListener","addNavItemListeners","addMenuPanelListeners","addHideButtonListener","contains","target","hideMenu","button","clearTimer","yThreshold","pageY","startTimer","navItem","element","classList","showMenu","id","onWindowResized","isMobileOrTablet","getElementById","querySelectorAll","getSectionByNavItem","navItemId","hideAllSections","add","section","remove","key","setTimeout","clearTimeout","openMenuButton","undefined","closeMenuButton","overlay","menu","style","overflowY","overflowX","isMobile","Breakpoint","PHONE","TABLET","DESKTOP","XL","XXL","HD","ColumnWidth","XS","SM","MD","ContentWidth","GutterWidth","modulesList","initAll","forEach","m","loadedModule","$","currentWidth","currentBreakpoint","detectBreakpoint","onresize","getCurrent","getCurrentColumnWidth","width","getCurrentGutterWidth","getWindowWidth","Math","max","scrollWidth","documentElement","offsetWidth","clientWidth","module","exports","isDraftMode","response","className","indexOf"],"mappings":"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","file":"/Volumes/Documents/Projects/arts-et-medias/arts-et-medias/lib/modules/apostrophe-assets/public/js/site.js","sourcesContent":["let currentLocale;\n\n// dom elements\nlet forms;\nlet selects;\n\n\n// public api\nexport function init() {\n  getDOMElements();\n  getCurrentLocale();\n  updateSelect();\n  addEventListeners();\n}\n\n\n// methods\nfunction addEventListeners() {\n  if (!forms || !forms.length) {\n    console.warn('Unable to handle lang switch form submissions');\n    return;\n  }\n\n  for (let i = 0; i < forms.length; i++) {\n    const form = forms[i];\n    form.addEventListener(\n      'submit',\n      (event) => {\n        event.preventDefault();\n        const { langSwitch } = form;\n        currentLocale = langSwitch.value.toLowerCase();\n        window.location = `/${ currentLocale }/`;\n      }\n    );\n  }\n}\n\nfunction getCurrentLocale() {\n  currentLocale = document.body.dataset.locale.replace('-draft', '');\n}\n\nfunction getDOMElements() {\n  forms = document.getElementsByClassName('lang-switch-form');\n  selects = document.getElementsByClassName('lang-switch-select');\n}\n\nfunction updateSelect() {\n  // create callback\n  const isCurrentLocale = (option) => option.value.toUpperCase() === currentLocale.toUpperCase();\n\n  // loop through all selects on page\n  for (let i = 0; i < selects.length; i++) {\n    const select = selects[i];\n\n    // find index in HTMLOptionsCollection\n    let index = -1;\n    for (let i = 0; i < select.options.length; i++) {\n      const option = select.options[i];\n      if (isCurrentLocale(option)) {\n        index = i;\n      }\n    }\n\n    // update <select>\n    select.selectedIndex = index;\n  }\n}\n","const breakpointModel = require('../models/breakpoints-model');\n\n\n// id mapping\nconst idsDict = {\n  headerArticlesNavItem: 'mmArticles',\n  headerEventsNavItem: 'mmEvents',\n  headerMediaNavItem: 'mmMedia',\n  headerPeopleNavItem: 'mmPeople',\n  headerOrgsNavItem: 'mmOrgs',\n  headerEducationNavItem: 'mmEducation',\n  headerSearchNavItem: 'mmSearch',\n  headerAboutNavItem: 'mmPages',\n};\n\n// dom elements\nlet navItems;\nlet hideButtons;\nlet menuPanel;\n\n// mouse out timer\nconst duration = 750;\nlet timer;\n\nlet isVisible = false;\n\n\n// public api\nexport function init() {\n  getDOMElements();\n  addEventListeners();\n}\n\n\n// event handlers\nfunction addEventListeners() {\n  addBodyClickListener();\n  addWindowResizeListener();\n  addNavItemListeners();\n  addMenuPanelListeners();\n  addHideButtonListener();\n}\n\nfunction addBodyClickListener() {\n  if (!document || !document.body) {\n    console.warn('Unable to handle clicks on <body>');\n    return;\n  }\n\n  document.body.addEventListener(\n    'click',\n    (event) => {\n      if (!isVisible) {\n        return;\n      }\n      if (!menuPanel.contains(event.target)) {\n        hideMenu();\n      }\n    }\n  );\n}\n\nfunction addHideButtonListener() {\n  if (!hideButtons || !hideButtons.length) {\n    console.warn('Unable to handle hide buttons\\' click');\n    return;\n  }\n\n  for (let i = 0; i < hideButtons.length; i++) {\n    const button = hideButtons[i];\n    button.addEventListener(\n      'click',\n      () => {\n        clearTimer();\n        hideMenu();\n      }\n    );\n  }\n}\n\nfunction addMenuPanelListeners() {\n  if (!menuPanel) {\n    console.warn('Unable to handle menu panel mouse events');\n    return;\n  }\n\n  menuPanel.addEventListener(\n    'mouseover',\n    () => clearTimer()\n  );\n  menuPanel.addEventListener(\n    'mouseout',\n    (event) => {\n      // TODO: make more solid?\n      const yThreshold = 200;\n      if (event.pageY > yThreshold) {\n        startTimer();\n      }\n    }\n  );\n}\n\nfunction addNavItemListeners() {\n  if (!navItems || !navItems.length) {\n    console.warn('Unable to handle nav items mouse events');\n    return;\n  }\n\n  for (let i = 0; i < navItems.length; i++) {\n    const navItem = navItems[i];\n    navItem.addEventListener(\n      'mouseover',\n      (event) => {\n        const element = event.target;\n        if (element.classList.contains('sans-menu')) {\n          hideMenu();\n        } else {\n          clearTimer();\n          showMenu(element.id);\n        }\n      }\n    );\n  }\n}\n\nfunction addWindowResizeListener() {\n  if (!window) {\n    console.warn('Unable to handle window resize');\n    return;\n  }\n  window.addEventListener('resize', onWindowResized);\n}\n\nfunction onWindowResized() {\n  if (breakpointModel.isMobileOrTablet()) {\n    hideMenu();\n  }\n}\n\n\n// dom methods\nfunction getDOMElements() {\n  menuPanel = document.getElementById('megaMenuPanel');\n  navItems = document.querySelectorAll('.header-nav .nav-list li a');\n  hideButtons = document.querySelectorAll('.mega-menu .hide-mega-menu-button');\n}\n\nfunction getSectionByNavItem(navItemId) {\n  return document.getElementById(idsDict[navItemId]);\n}\n\n\n// show/hide methods\nfunction showMenu(navItemId) {\n  hideAllSections();\n\n  menuPanel.classList.add('visible');\n\n  const section = getSectionByNavItem(navItemId);\n  if (section) {\n    section.classList.add('visible');\n  }\n\n  isVisible = true;\n}\n\nfunction hideMenu() {\n  menuPanel.classList.remove('visible');\n  isVisible = false;\n}\n\nfunction hideAllSections() {\n  for (var key in idsDict) {\n    const section = getSectionByNavItem(key);\n    if (section) {\n      section.classList.remove('visible');\n    }\n  }\n}\n\n\n// timer methods\nfunction startTimer() {\n  clearTimer();\n  timer = setTimeout(\n    () => hideMenu(),\n    duration\n  );\n}\n\nfunction clearTimer() {\n  clearTimeout(timer);\n  timer = null;\n}\n","// models\nconst breakpointModel = require('../models/breakpoints-model');\n\n// dom elements\nlet openMenuButton = undefined;\nlet closeMenuButton = undefined;\nlet overlay = undefined;\nlet menu = undefined;\n\n// vars\nlet isVisible = false;\n\n\n// public api\nexport function init() {\n  getDOMElements();\n  addEventListeners();\n}\n\n\n// method definitions\nfunction addEventListeners() {\n  openMenuButton.addEventListener('click', showMenu);\n  closeMenuButton.addEventListener('click', hideMenu);\n  overlay.addEventListener('click', hideMenu);\n\n  window.addEventListener('resize', onWindowResized);\n}\n\nfunction getDOMElements() {\n  closeMenuButton = document.getElementById('closeMobileMenuButton');\n  openMenuButton = document.getElementById('openMobileMenuButton');\n  menu = document.getElementById('mobileMenu');\n  overlay = document.getElementById('overlay');\n}\n\nfunction hideMenu() {\n  menu.classList.remove('visible');\n  overlay.classList.remove('visible');\n\n  // allow scrolling\n  document.body.style.overflowY = 'auto';\n  document.body.style.overflowX = 'hidden';\n\n  isVisible = false;\n}\n\nfunction showMenu() {\n  menu.classList.add('visible');\n  overlay.classList.add('visible');\n\n  // disallow scrolling\n  document.body.style.overflowY = 'hidden';\n  document.body.style.overflowX = 'hidden';\n\n  isVisible = true;\n}\n\nfunction onWindowResized() {\n  if (!breakpointModel.isMobile() && isVisible) {\n    hideMenu();\n  }\n}\n","const Breakpoint = {\n  PHONE: 375,\n  TABLET: 768,\n  DESKTOP: 1024,\n  XL: 1280,\n  XXL: 1440,\n  HD: 1920,\n};\nexport default Breakpoint;\n","// match src/styles/common/_variables.scss\nconst ColumnWidth = {\n  XS: 40, // mobile\n  SM: 35, // tablet\n  MD: 50, // desktop\n  XL: 60,\n  XXL: 70,\n  HD: 80,\n};\nexport default ColumnWidth;\n","// match src/styles/common/_variables.scss\nconst ContentWidth = {\n  PHONE: 320,\n  TABLET: 695,\n  DESKTOP: 930,\n  XL: 1105,\n  XXL: 1280,\n  HD: 1510,\n};\nexport default ContentWidth;\n","// match src/styles/common/_variables.scss\nconst GutterWidth = {\n  XS: 16, // mobile\n  SM: 25, // tablet\n  MD: 30, // desktop\n  XL: 35,\n  XXL: 40,\n  HD: 50,\n};\nexport default GutterWidth;\n","const modulesList = [\n  // models\n  'models/breakpoints-model',\n  // components\n  'components/lang-switch',\n  'components/mega-menu',\n  'components/mobile-menu',\n];\n\n\n// methods definitions\nfunction initAll() {\n  // import all *.js files and `init()` them\n  modulesList.forEach((m) => {\n    // require module\n    const loadedModule = require(`./${ m }`);\n\n    // init() if method exists\n    if ((typeof loadedModule.init) === 'function') {\n      loadedModule.init();\n    }\n  });\n}\n\n// init all on page load\n$(initAll);\n","// constants\nconst Breakpoint = require('../constants/breakpoint').default;\nconst ColumnWidth = require('../constants/column-width').default;\nconst GutterWidth = require('../constants/gutter-width').default;\n\n// vars\nlet currentWidth = undefined;\nlet currentBreakpoint = undefined;\n\n\n// public api\nexport function init() {\n  detectBreakpoint();\n  window.onresize = onWindowResized;\n}\n\nexport function getCurrent() {\n  return currentBreakpoint;\n}\n\nexport function getCurrentColumnWidth() {\n  let width = -1;\n  switch (currentBreakpoint) {\n  case Breakpoint.PHONE:\n    width = ColumnWidth.XS;\n    break;\n\n  case Breakpoint.TABLET:\n    width = ColumnWidth.SM;\n    break;\n\n  case Breakpoint.DESKTOP:\n    width = ColumnWidth.MD;\n    break;\n\n  case Breakpoint.XL:\n    width = ColumnWidth.XL;\n    break;\n\n  case Breakpoint.XXL:\n    width = ColumnWidth.XXL;\n    break;\n  }\n  return width;\n}\n\nexport function getCurrentGutterWidth() {\n  let width = -1;\n  switch (currentBreakpoint) {\n  case Breakpoint.PHONE:\n    width = GutterWidth.XS;\n    break;\n\n  case Breakpoint.TABLET:\n    width = GutterWidth.SM;\n    break;\n\n  case Breakpoint.DESKTOP:\n    width = GutterWidth.MD;\n    break;\n\n  case Breakpoint.XL:\n    width = GutterWidth.XL;\n    break;\n\n  case Breakpoint.XXL:\n    width = GutterWidth.XXL;\n    break;\n  }\n  return width;\n}\n\nexport function isMobile() {\n  return currentBreakpoint === Breakpoint.PHONE;\n}\n\nexport function isMobileOrTablet() {\n  return currentBreakpoint === Breakpoint.PHONE || currentBreakpoint === Breakpoint.TABLET;\n}\n\n\n// private methods\nfunction detectBreakpoint() {\n  currentWidth = getWindowWidth();\n\n  if (currentWidth >= Breakpoint.DESKTOP) {\n    currentBreakpoint = Breakpoint.DESKTOP;\n\n  } else if (currentWidth >= Breakpoint.TABLET) {\n    currentBreakpoint = Breakpoint.TABLET;\n\n  } else if (currentWidth >= Breakpoint.XL) {\n    currentBreakpoint = Breakpoint.XL;\n\n  } else if (currentWidth >= Breakpoint.XXL) {\n    currentBreakpoint = Breakpoint.XXL;\n\n  } else {\n    currentBreakpoint = Breakpoint.PHONE;\n  }\n}\n\nfunction getWindowWidth() {\n  return Math.max(\n    document.body.scrollWidth,\n    document.documentElement.scrollWidth,\n    document.body.offsetWidth,\n    document.documentElement.offsetWidth,\n    document.documentElement.clientWidth\n  );\n  // from https://stackoverflow.com/questions/1038727/how-to-get-browser-width-using-javascript-code\n}\n\nfunction onWindowResized() {\n  detectBreakpoint();\n}\n","module.exports = isDraftMode;\n\n\nfunction isDraftMode() {\n  let response = false;\n\n  const { classList } = document.body;\n\n  if (!classList) {\n    return response;\n  }\n\n  for (let i = 0; i < classList.length; i++) {\n    const className = classList[i];\n    if (className.indexOf('draft') > -1) {\n      response = true;\n    }\n  }\n\n  return response;\n}\n"]}