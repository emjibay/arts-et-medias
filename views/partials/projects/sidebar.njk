{%- from 'macros/banner-ad.njk' import containedSidebarBanners -%}


{%- set hasFeaturedProject = apos.aemPieces.hasFeaturedProject(data) -%}
{%- set isDraftMode = apos.aemUtils.isDraftMode(data) -%}


<aside class="sidebar sidebar-projects">
  <article>
    {%- if hasFeaturedProject or isDraftMode -%}
      {% include "partials/projects/featured.njk" %}
      <hr class="separator no-mb" />
    {%- endif -%}

    {{
      containedSidebarBanners({
        data: data,
        propName: 'projectsSidebarBanners1',
        hasTopSeparator: false,
        hasBottomSeparator: true
      })
    }}

    {% include "partials/organizations/related.njk" %}

    {{
      containedSidebarBanners({
        data: data,
        propName: 'projectsSidebarBanners2',
        hasTopSeparator: true,
        hasBottomSeparator: false
      })
    }}

    <hr class="separator" />

    {% include "partials/projects/search.njk" %}

    <hr class="separator" />

    {% include "partials/sidebar/help-cta.njk" %}
  </article>
</aside>
